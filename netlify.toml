# See:
# https://docs.netlify.com/configure-builds/file-based-configuration/#sample-netlify-toml-file
# https://docs.netlify.com/integrations/frameworks/#next-js
# https://docs.netlify.com/integrations/frameworks/next-js/overview/#pnpm-support
# https://docs.netlify.com/configure-builds/manage-dependencies/#pnpm

# Settings in the [build] context are global and are applied to
# all contexts unless otherwise overridden by more specific contexts.
[build]
# Directory to change to before starting a build.
# This is where we will look for package.json/.nvmrc/etc.
# If not set, defaults to the root directory.
base = "."

# Directory that contains the deploy-ready HTML files and
# assets generated by the build. This is relative to the base
# directory if one has been set, or the root directory if
# a base has not been set. This sample publishes the directory
# located at the absolute path "root/project/build-output"

command = "pnpm run build"
publish = "out"

[build.environment]
#PNPM_FLAGS = "--shamefully-hoist"
# for apps using next export
NETLIFY_NEXT_PLUGIN_SKIP = "true"

#[[plugins]]
# Installs the Lighthouse Build Plugin for all deploy contexts
#package = "@netlify/plugin-lighthouse"

[[headers]]
# Define which paths this specific [[headers]] block will cover.
for = "/*"

[headers.values]
X-Frame-Options = "DENY"
X-XSS-Protection = "1; mode=block"
X-Content-Type-Options = "nosniff"
Strict-Transport-Security = "max-age=31536000"
# Content-Security-Policy = "frame-ancestors https://www.facebook.com"

# Multi-value headers are expressed with multi-line strings.
# cache-control = '''
# max-age=0,
# no-cache,
# no-store,
# must-revalidate'''

[[headers]]
for = "/sw.js"
[headers.values]
"Cache-Control" = "no-cache"

[[headers]]
for = "/*.js"
[headers.values]
# cache-control = "max-age=31536000"
"Cache-Control" = "public, max-age=31536000, s-maxage=31536000"


[[headers]]
for = "/*.css"
[headers.values]
cache-control = "max-age=31536000"

[[headers]]
for = "/_next/*.json"
[headers.values]
cache-control = "max-age=31536000"
